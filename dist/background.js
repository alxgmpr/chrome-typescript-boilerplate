var pageData;chrome.runtime.onMessage.addListener(function(request){if(request.cmd==="pageData")pageData=request.data});chrome.runtime.onConnect.addListener(function(port){console.assert(port.name=="popup");port.onMessage.addListener(function(msg){if(msg.cmd=="getPageData")port.postMessage({cmd:"pageData",data:pageData})})});